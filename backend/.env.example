# ============================================================================
# WalletMind Backend Environment Configuration
# Copy this file to .env and fill in your actual values
# SECURITY WARNING: NEVER commit .env to git! It contains sensitive data.
# ============================================================================

# ============================================================================
# 1. LLM Configuration
# ============================================================================

# LLM Provider Selection (groq, openai, google, anthropic)
LLM_PROVIDER=groq
LLM_MODEL=mixtral-8x7b-32768
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2048

# API Keys for LLM Providers
# Get Groq API key from: https://console.groq.com/keys
GROQ_API_KEY=gsk_your_groq_api_key_here

# Optional: Google Gemini (alternative)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=AIzaSy_your_google_api_key_here

# Optional: OpenAI (alternative)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your_openai_api_key_here

# Optional: Anthropic Claude (alternative)
ANTHROPIC_API_KEY=sk-ant-your_anthropic_key_here

# ============================================================================
# 2. Database Configuration (PostgreSQL + Prisma)
# ============================================================================

# PostgreSQL Database URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://walletmind_user:secure_password_here@localhost:5432/walletmind
DIRECT_URL=

# Individual PostgreSQL settings (for Docker Compose)
POSTGRES_USER=walletmind_user
POSTGRES_PASSWORD=secure_password_here
POSTGRES_DB=walletmind
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ============================================================================
# 3. ChromaDB Configuration
# ============================================================================

# ChromaDB persistence directory
CHROMADB_PERSIST_DIR=./data/chromadb

# ChromaDB server settings (if running as service)
CHROMADB_HOST=localhost
CHROMADB_PORT=8000

# ChromaDB collection settings
CHROMADB_COLLECTION_NAME=agent_memory
CHROMADB_DISTANCE_METRIC=cosine

# ============================================================================
# 4. Blockchain Configuration
# ============================================================================

# CRITICAL: Private Keys (NEVER commit these to git!)
# Generate with: openssl rand -hex 32
DEPLOYER_PRIVATE_KEY=0xYOUR_DEPLOYER_PRIVATE_KEY_64_HEX_CHARS
AGENT_PRIVATE_KEY=0xYOUR_AGENT_PRIVATE_KEY_64_HEX_CHARS

# Ethereum Sepolia Testnet (Primary Network)
# Get free API key from: https://www.alchemy.com/
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
SEPOLIA_CHAIN_ID=11155111

# Optional: Polygon Amoy Testnet (Multi-chain support)
POLYGON_AMOY_RPC_URL=https://polygon-amoy.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
POLYGON_AMOY_CHAIN_ID=80002

# Optional: Base Goerli Testnet
BASE_GOERLI_RPC_URL=https://base-goerli.g.alchemy.com/v2/YOUR_ALCHEMY_API_KEY
BASE_GOERLI_CHAIN_ID=84531

# Smart Contract Addresses (update after deployment)
AGENT_WALLET_CONTRACT_ADDRESS=0xYOUR_DEPLOYED_AGENT_WALLET_ADDRESS
AGENT_REGISTRY_CONTRACT_ADDRESS=0xYOUR_DEPLOYED_AGENT_REGISTRY_ADDRESS

# Gas Configuration
DEFAULT_GAS_LIMIT=100000
MAX_GAS_PRICE_GWEI=50
GAS_PRICE_MULTIPLIER=1.1
ENABLE_EIP1559=true

# ============================================================================
# 5. IPFS Configuration
# ============================================================================

# Local IPFS node (if self-hosting)
IPFS_API_URL=http://localhost:5001
IPFS_GATEWAY_URL=http://localhost:8080

# Pinata Cloud IPFS (Recommended for production)
# Get API keys from: https://www.pinata.cloud/
PINATA_API_KEY=your_pinata_api_key_here
PINATA_SECRET_API_KEY=your_pinata_secret_api_key_here
PINATA_JWT=your_pinata_jwt_token_here

# IPFS settings
IPFS_PIN_ON_ADD=true
IPFS_TIMEOUT_SECONDS=30

# ============================================================================
# 6. Redis Configuration (Caching & Rate Limiting)
# ============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Individual Redis settings (for Docker Compose)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis settings
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_CACHE_TTL_SECONDS=300

# ============================================================================
# 7. Background Tasks Configuration
# ============================================================================

# Enable/disable background tasks
ENABLE_BACKGROUND_TASKS=true

# Task intervals (in seconds)
TRANSACTION_MONITOR_INTERVAL=10
REPUTATION_UPDATE_INTERVAL=300
AGENT_LOOP_CHECK_INTERVAL=30

# Task settings
MAX_CONCURRENT_AGENTS=10
TRANSACTION_CONFIRMATION_BLOCKS=3

# ============================================================================
# 8. Security Configuration
# ============================================================================

# Key Management
# Generate secure master password with: openssl rand -base64 32
MASTER_PASSWORD=your_very_secure_master_password_min_32_characters_long_and_random
KEY_SALT=walletmind_unique_salt_per_deployment_2025
KEY_ROTATION_DAYS=90
ENABLE_KEY_ROTATION=true

# Encryption settings
ENCRYPTION_ALGORITHM=AES-256-GCM
KEY_DERIVATION_ITERATIONS=100000

# Cryptographic Operations
NONCE_VALIDITY_SECONDS=300
SIGNATURE_MAX_AGE_SECONDS=3600
ENABLE_REPLAY_PROTECTION=true

# Merkle Tree settings
MERKLE_HASH_ALGORITHM=sha256

# ============================================================================
# 9. Authentication & Authorization
# ============================================================================

# JWT Configuration
# Generate secure JWT secret with: openssl rand -base64 48
JWT_SECRET=your_super_secret_jwt_signing_key_min_48_chars_very_random_and_secure
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRY_MINUTES=60
REFRESH_TOKEN_EXPIRY_DAYS=7

# API Key Configuration
API_KEY_LENGTH=32
API_KEY_PREFIX=wm_
ENABLE_API_KEY_ROTATION=true
API_KEY_ROTATION_DAYS=90

# Rate Limiting
DEFAULT_RATE_LIMIT=60
RATE_LIMIT_WINDOW_SECONDS=60
ENABLE_RATE_LIMITING=true

# Session Management
SESSION_TIMEOUT_MINUTES=30
MAX_SESSIONS_PER_USER=5

# ============================================================================
# 10. Oracle & External Data Services
# ============================================================================

# CoinGecko API (Price feeds)
# Get free API key from: https://www.coingecko.com/en/api
COINGECKO_API_KEY=CG-your_coingecko_api_key_here

# Etherscan API (Contract verification & blockchain data)
# Get free API key from: https://etherscan.io/myapikey
ETHERSCAN_API_KEY=your_etherscan_api_key_here

# Chainlink Oracle (optional for price feeds)
CHAINLINK_API_URL=https://api.chain.link/v1

# Gas Price Oracle
GAS_ORACLE_URL=https://ethgasstation.info/api/ethgasAPI.json

# ============================================================================
# 11. Logging & Monitoring
# ============================================================================

# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=./logs/walletmind.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# Enable sensitive data filtering (CRITICAL for security)
ENABLE_SENSITIVE_DATA_FILTER=true

# Sentry error tracking (optional)
SENTRY_DSN=https://your_sentry_dsn_here

# ============================================================================
# 12. Application Settings
# ============================================================================

# Environment
ENVIRONMENT=development
DEBUG=false

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true

# CORS settings (adjust for production)
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173"]
CORS_ALLOW_CREDENTIALS=true

# Agent settings
DEFAULT_AGENT_AUTONOMY_LEVEL=0.7
MAX_AGENT_MEMORY_ITEMS=1000

# Transaction settings
DEFAULT_TRANSACTION_TIMEOUT=300
MAX_PENDING_TRANSACTIONS=100

# ============================================================================
# 13. Feature Flags
# ============================================================================

# Enable/disable specific features
ENABLE_AGENT_ORCHESTRATION=true
ENABLE_DECISION_LOGGING=true
ENABLE_REPUTATION_SYSTEM=true
ENABLE_API_PAYMENTS=true
ENABLE_INTER_AGENT_COMMUNICATION=true

# ============================================================================
# End of Configuration
# ============================================================================

# REMINDER: After copying to .env, update all placeholder values!
# SECURITY CHECKLIST:
# [ ] Changed all passwords from defaults
# [ ] Generated secure random values for secrets
# [ ] Obtained all necessary API keys
# [ ] Added .env to .gitignore
# [ ] Never commit .env to version control
# [ ] Use environment-specific .env files for different deployments

RATE_LIMIT_WINDOW_SECONDS=60

# ============================================================================
# Infrastructure Services
# ============================================================================

# Oracle Service
ORACLE_CACHE_TTL=300  # 5 minutes
COINGECKO_API_KEY=your_coingecko_api_key
CHAINLINK_PROVIDER_URL=https://eth-sepolia.g.alchemy.com/v2/your-api-key
ETHERSCAN_API_KEY=your_etherscan_api_key

# Payment Service
PAYMENT_CONFIRMATION_BLOCKS=3
DEFAULT_PAYMENT_GAS_LIMIT=100000

# Verification Service
BLOCKCHAIN_LOGGING_ENABLED=true
IPFS_STORAGE_ENABLED=true

# ============================================================================
# API Configuration
# ============================================================================
API_PREFIX=/api
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false  # Set to true in development

# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://walletmind.vercel.app
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# Monitoring & Logging
# ============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
SENTRY_DSN=  # Optional: Sentry error tracking

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_SWAGGER_DOCS=true
ENABLE_WEBSOCKETS=true
ENABLE_METRICS=true
ENABLE_RATE_LIMITING=true

# ============================================================================
# Development Settings
# ============================================================================
DEBUG=false
TESTING=false
ENVIRONMENT=production  # development, staging, production

# ============================================================================
# Generate Secure Secrets
# ============================================================================
# Use these commands to generate secure values:
#
# Master Password:
#   openssl rand -base64 32
#
# JWT Secret:
#   openssl rand -base64 48
#
# Key Salt:
#   openssl rand -base64 16
#
# API Key:
#   openssl rand -hex 32
